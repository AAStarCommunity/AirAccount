[workspace]
resolver = "2"
members = [
    "packages/core-logic",
    "packages/proto",
]
exclude = [
    "third_party",
    "packages/ta-arm-trustzone",
    "packages/client-ca",
]

[workspace.dependencies]
# Common dependencies
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
uuid = { version = "1.8", features = ["v4", "serde"] }
anyhow = "1.0"
zeroize = { version = "1.7", features = ["derive"] }

# ğŸš€ å¼€å‘æ„å»ºä¼˜åŒ–é…ç½® - æœ€å¤§åŒ–ç¼–è¯‘é€Ÿåº¦
[profile.dev]
opt-level = 0              # æœ€å¿«ç¼–è¯‘é€Ÿåº¦
debug = true               # ä¿æŒè°ƒè¯•ä¿¡æ¯
split-debuginfo = "unpacked"  # macOS/Windows é“¾æ¥åŠ é€Ÿ
codegen-units = 256        # æœ€å¤§å¹¶è¡Œç¼–è¯‘å•å…ƒ
lto = false               # å…³é—­é“¾æ¥æ—¶ä¼˜åŒ–
panic = 'unwind'          # ä¿æŒé»˜è®¤panicå¤„ç†
incremental = true        # å¯ç”¨å¢é‡ç¼–è¯‘
overflow-checks = true    # ä¿æŒæº¢å‡ºæ£€æŸ¥

# ğŸ“¦ å‘å¸ƒæ„å»ºä¼˜åŒ–é…ç½® - æœ€å°ä½“ç§¯å’Œæœ€ä½³æ€§èƒ½
[profile.release]
opt-level = "s"           # ä½“ç§¯ä¼˜åŒ–
lto = true               # é“¾æ¥æ—¶ä¼˜åŒ–
codegen-units = 1        # å•ä¸ªç¼–è¯‘å•å…ƒï¼Œæ›´å¥½ä¼˜åŒ–
panic = "abort"          # æ›´å°çš„äºŒè¿›åˆ¶ä½“ç§¯
strip = true             # å‰¥ç¦»ç¬¦å·è¡¨
overflow-checks = false  # å‘å¸ƒç‰ˆæœ¬å…³é—­æº¢å‡ºæ£€æŸ¥

# ğŸ§ª æµ‹è¯•æ„å»ºä¼˜åŒ–é…ç½®
[profile.test]
opt-level = 1            # è½»å¾®ä¼˜åŒ–ï¼Œå¹³è¡¡é€Ÿåº¦å’Œç¼–è¯‘æ—¶é—´
debug = true             # ä¿æŒè°ƒè¯•ä¿¡æ¯ç”¨äºæµ‹è¯•
incremental = true       # å¢é‡ç¼–è¯‘
codegen-units = 256      # å¹¶è¡Œç¼–è¯‘