# AirAccount 基础功能测试流程

## 测试环境准备

1. **启动CA服务**
```bash
cd ca-service-simple
npm install
npm run dev
# 服务运行在 http://localhost:3001
```

2. **启动Demo DApp**
```bash
cd demo-complete
npm install
npm run dev
# 前端运行在 http://localhost:5173
```

## 测试流程

### 1. 创建账户 ✅
- [x] 打开 http://localhost:5173
- [x] 选择"邮箱注册"
- [x] 输入邮箱地址（如：test@example.com）
- [x] 点击"注册Passkey并创建账户"
- [x] 等待账户创建完成

**期望结果：**
- 账户创建成功
- 显示以太坊地址
- 显示初始余额（1.2345 ETH）

### 2. 查看余额 ✅
- [x] 账户创建后自动显示余额
- [x] 余额显示为 1.2345 ETH
- [x] 显示USD等值价格

**期望结果：**
- 余额正确显示
- 安全状态显示"已保护"

### 3. 收款功能 ✅
- [x] 在右侧"收款"卡片中
- [x] 查看收款地址
- [x] 点击"复制地址"
- [x] 验证地址已复制到剪贴板

**期望结果：**
- 收款地址正确显示
- 复制功能正常工作

### 4. 转账功能 ✅
- [x] 在左侧"转账"卡片中
- [x] 输入收款地址：`0x742d35Cc6634C0532925a3b8D84c5e1fC30a5d`
- [x] 输入转账金额：`0.1`
- [x] 点击"转账 (免Gas费)"
- [x] 等待转账完成

**期望结果：**
- 转账成功提示
- 显示交易哈希
- 余额更新（减少0.1 ETH）

### 5. 验证状态 ✅
- [x] 账户余额从 1.2345 变为 1.1345
- [x] 可以继续进行新的转账
- [x] 所有功能正常响应

## 控制台输出验证

### CA服务端输出
```
🚀 AirAccount CA Service Simple
📡 Server running on http://localhost:3001
📝 创建账户请求: test@example.com
🔐 TEE: 生成混合熵源密钥...
✅ TEE: 密钥生成完成
✅ 账户创建成功: 0x...
💸 转账请求: 0x... -> 0x742d35Cc6634C0532925a3b8D84c5e1fC30a5d (0.1 ETH)
🔒 TEE: 执行安全检查...
  ✓ 黑名单检查: 通过
  ✓ 白名单检查: 通过
  ✓ 交易模拟: 通过
  ✓ 支出限制: 通过
  ✓ 异常检测: 通过
✍️ TEE: 生成签名...
✅ TEE: 签名完成
✅ 转账成功: 0x...
```

### 前端控制台输出
```
🚀 Initializing AirAccount SDK...
✅ SDK initialized successfully
🚀 Creating account...
✅ 账户创建成功: {...}
💸 开始转账: {to: "0x742d35Cc6634C0532925a3b8D84c5e1fC30a5d", amount: "0.1"}
✅ 转账成功: {...}
```

## 成功标准

✅ **所有基础功能正常工作：**
1. 账户创建（邮箱 + Passkey模拟）
2. 余额查询
3. 转账功能
4. 收款地址显示

✅ **用户体验流畅：**
1. 界面简洁明了
2. 操作反馈及时
3. 错误处理完善

✅ **架构正确：**
1. SDK → CA服务 → Mock TEE
2. HTTP API正常通信
3. 状态管理正确

## 已知限制

- 使用模拟TEE（非真实硬件）
- 内存存储（重启丢失数据）
- 无真实区块链交互
- 简化的Passkey实现

## 下一步

- 集成真实OP-TEE环境
- 添加数据库持久化
- 集成真实区块链
- 完善安全检查