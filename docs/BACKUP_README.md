# AirAccount åŸå§‹ç»„ä»¶å¤‡ä»½è¯´æ˜

## ğŸ“ å¤‡ä»½å†…å®¹

### åŸå§‹ç»è¿‡æµ‹è¯•çš„ç»„ä»¶å¤‡ä»½

ä»¥ä¸‹æ˜¯åœ¨P0å®‰å…¨ä¿®å¤ä¹‹å‰å¤‡ä»½çš„åŸå§‹ã€ç»è¿‡æµ‹è¯•çš„ç»„ä»¶ï¼š

1. **airaccount-ca-original-backup/**
   - åŸå§‹çš„ç»è¿‡æµ‹è¯•çš„Client Application (CA)
   - æ”¯æŒåŸºæœ¬é’±åŒ…åŠŸèƒ½æµ‹è¯•
   - åŒ…å«å®Œæ•´çš„TA-CAé€šä¿¡æµ‹è¯•å¥—ä»¶
   - çŠ¶æ€ï¼šâœ… å·²éªŒè¯å¯ä¸airaccount-ta-simpleæ­£å¸¸é€šä¿¡

2. **airaccount-ta-simple-original-backup/**
   - åŸå§‹çš„ç®€åŒ–Trusted Application (TA)
   - å®ç°åŸºæœ¬é’±åŒ…ç®¡ç†åŠŸèƒ½
   - æ”¯æŒHello Worldã€Echoã€é’±åŒ…åˆ›å»ºç­‰å‘½ä»¤
   - çŠ¶æ€ï¼šâœ… ç»è¿‡æµ‹è¯•ï¼Œå¯åœ¨QEMU OP-TEEç¯å¢ƒè¿è¡Œ

3. **airaccount-ta-original-backup/**
   - åŸå§‹çš„æ ‡å‡†Trusted Application (TA)
   - ä½¿ç”¨serdeåºåˆ—åŒ–ï¼Œæ”¯æŒæ›´å¤æ‚çš„æ•°æ®ç»“æ„
   - å…¼å®¹eth_walletæ ¼å¼
   - çŠ¶æ€ï¼šâœ… æ”¯æŒæ ‡å‡†é’±åŒ…æ“ä½œ

## ğŸ”„ å½“å‰ç‰ˆæœ¬ä¸å¤‡ä»½çš„åŒºåˆ«

### å½“å‰ç‰ˆæœ¬å¢å¼ºåŠŸèƒ½ (å·²å®ŒæˆP0å®‰å…¨ä¿®å¤)
- **å®‰å…¨ä¿®å¤**: æ·»åŠ äº†å®‰å…¨çš„æ··åˆç†µæºå®ç° (TEEå†…)
- **æ–°å‘½ä»¤**: CMD_CREATE_HYBRID_ACCOUNT (20), CMD_SIGN_WITH_HYBRID_KEY (21), CMD_VERIFY_SECURITY_STATE (22)
- **æ‰©å±•CA**: æ”¯æŒæ··åˆç†µæºç›¸å…³çš„äº¤äº’å’Œå‘½ä»¤è¡Œæ“ä½œ
- **å®‰å…¨æ¥å£**: åœ¨Core Logicå±‚æ·»åŠ å®‰å…¨æ¥å£ï¼Œä¸å¤„ç†æ•æ„Ÿæ•°æ®

### å¤‡ä»½ç‰ˆæœ¬ç‰¹ç‚¹
- **çº¯å‡€**: âœ… ç¡®è®¤ä¸åŒ…å«æ··åˆç†µæºä»£ç 
- **ç¨³å®š**: âœ… ç»è¿‡å®Œæ•´æµ‹è¯•éªŒè¯
- **ç®€æ´**: âœ… åªåŒ…å«åŸºç¡€é’±åŒ…åŠŸèƒ½ (Hello, Echo, é’±åŒ…ç®¡ç†)

### å®‰å…¨éªŒè¯
- âœ… åŸå§‹CAå¤‡ä»½æ— æ··åˆç†µæºç›¸å…³ä»£ç 
- âœ… åŸå§‹TAå¤‡ä»½åŒ…å«æ ‡å‡†é’±åŒ…åŠŸèƒ½
- âœ… åŸå§‹TA-Simpleå¤‡ä»½ä»…å«åŸºç¡€åŠŸèƒ½

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æ¢å¤åˆ°åŸå§‹ç‰ˆæœ¬
å¦‚æœéœ€è¦å›åˆ°ç¨³å®šçš„åŸå§‹ç‰ˆæœ¬ï¼š

```bash
# æ¢å¤åŸå§‹CA
rm -rf packages/airaccount-ca
cp -r packages/airaccount-ca-original-backup packages/airaccount-ca

# æ¢å¤åŸå§‹TA-Simple
rm -rf packages/airaccount-ta-simple  
cp -r packages/airaccount-ta-simple-original-backup packages/airaccount-ta-simple

# æ¢å¤åŸå§‹TA
rm -rf packages/airaccount-ta
cp -r packages/airaccount-ta-original-backup packages/airaccount-ta
```

### æµ‹è¯•åŸå§‹ç‰ˆæœ¬
```bash
# ç¼–è¯‘å’Œæµ‹è¯•CA
cd packages/airaccount-ca
cargo build --release
cargo run test

# æµ‹è¯•é’±åŒ…åŠŸèƒ½
cargo run wallet

# äº¤äº’æ¨¡å¼
cargo run interactive
```

## ğŸ“ ç‰ˆæœ¬å†å²

### v0.1.0-original (å¤‡ä»½ç‰ˆæœ¬)
- âœ… åŸºæœ¬TA-CAé€šä¿¡
- âœ… é’±åŒ…åˆ›å»ºã€åœ°å€æ´¾ç”Ÿã€äº¤æ˜“ç­¾å
- âœ… å®‰å…¨å†…å­˜ç®¡ç†
- âœ… å®¡è®¡æ—¥å¿—

### v0.1.1-security-fixed (å½“å‰ç‰ˆæœ¬)  
- âœ… P0å®‰å…¨ä¿®å¤ï¼šæ··åˆç†µæºç§»è‡³TEEå†…
- âœ… æ–°å¢æ··åˆç†µæºè´¦æˆ·æ”¯æŒ
- âœ… æ‰©å±•CAå‘½ä»¤é›†
- âœ… ä¿æŒå‘åå…¼å®¹

## âš ï¸ é‡è¦æé†’

1. **å¤‡ä»½å®Œæ•´æ€§**: è¿™äº›å¤‡ä»½åŒ…å«äº†æœ€åä¸€ä¸ªå·²çŸ¥å·¥ä½œçš„ç‰ˆæœ¬
2. **æµ‹è¯•éªŒè¯**: å¤‡ä»½ç‰ˆæœ¬å·²é€šè¿‡å®Œæ•´çš„TA-CAé€šä¿¡æµ‹è¯•
3. **å®‰å…¨åŸºçº¿**: å¯ä½œä¸ºå®‰å…¨å¯¹æ¯”çš„åŸºå‡†ç‰ˆæœ¬
4. **å¼€å‘å‚è€ƒ**: æ–°åŠŸèƒ½å¼€å‘æ—¶å¯å‚è€ƒåŸå§‹å®ç°

## ğŸ” å¤‡ä»½éªŒè¯

éªŒè¯å¤‡ä»½å®Œæ•´æ€§ï¼š
```bash
# æ£€æŸ¥å¤‡ä»½ç›®å½•
ls -la packages/*-original-backup/

# éªŒè¯å…³é”®æ–‡ä»¶
ls packages/airaccount-ca-original-backup/src/
ls packages/airaccount-ta-simple-original-backup/src/
```

å¤‡ä»½æ—¶é—´: 2025-08-15
å¤‡ä»½åŸå› : P0å®‰å…¨ä¿®å¤å‰çš„ç¨³å®šç‰ˆæœ¬ä¿æŠ¤